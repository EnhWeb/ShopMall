#            ShopMall与Lzx-Blog诞生

## 前言

ShopMall：一直想做一个比较完美的购物网站，索性就延续毕业设计的时候做“**广西民族师范学院超市网站**”的想法吧。做一个ShopMall商城网站。把自己所学的技术都运用上去，看看效果如何。从零开始.NET Core的ShopMall就开始了。

lzx-Blog：同期想做的项目还有属于自己的博客网站，2019年4月份做了一份.NET的了，但是随着技术不断更新，索性也一起尬玩运用.NET Core进行编写。

# 第一章、 ShopMall 技术方案

## 1.1 ShopMall所需项目

### 1.1.1 接口WebApi

###  1.1.2 Uni-App解决移动端（h5、小程序、IOS、Android）

### 1.1.3 web_PC端

### 1.1.4 IdentityServerWeb 认证端

### 1.1.5 Signalr实时功能推送端

## 1.2 ShopMall数据库字段设计

  系统实际涉及的数据量约为百万级，从保证系统的流畅度和成本等各方面因素考虑。平台数据库设计，如下所示：

 #### **省市县表**  

| 数据表中文名称 | 省市县表                  | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | province_city_county      |                |              |          |          |            |          |               |          |              |
| 功能简述       |                           |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**            | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表id                      | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 名称                      | name           | varchar      | 100      |          |            | N        |               |          |              |
| 3              | 父级ID                    | pid            | int          |          |          |            | N        |               |          |              |
| 4              | 1表示省，2表示市，3表示县 | ptype          | int          |          |          |            | N        |               |          |              |
| 5              | 编码                      | code           | varchar      | 20       |          |            | N        |               |          |              |
| 6              | 状态，默认为1             | status         | int          |          |          | 1          | N        |               |          |              |
| 7              | 创建日期                  | createTime     | int          |          |          |            | N        |               |          |              |
| 8              | 更改日期                  | updateTime     | int          |          |          |            | N        |               |          |              |

 #### **地址表**

| 数据表中文名称 |                | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | -------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_address   |                |              |          |          |            |          |               |          |              |
| 功能简述       |                |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名** | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              |                | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 收货人         | csName         | varchar      | 10       |          |            | N        |               |          |              |
| 3              | 收货人         | csMobilePhone  | varchar      | 12       |          |            | N        |               |          |              |
| 4              |                | provinceID     | int          |          |          |            | N        |               |          |              |
| 5              |                | cityID         | int          |          |          |            | N        |               |          |              |
| 6              | 区县ID         | areaID         | int          |          |          |            | N        |               |          |              |
| 7              | 详细街道       | detail         | varchar      | 50       |          |            | N        |               |          |              |
| 8              | 排序           | sort           | int          |          |          |            | N        |               |          |              |
| 9              | 是否为默认     | isDefault      | bit          |          |          |            | N        |               |          |              |

 #### **广告表**



| 数据表中文名称 |                                                            | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ---------------------------------------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_advertisement                                         |                |              |          |          |            |          |               |          |              |
| 功能简述       |                                                            |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                                             | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              |                                                            | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              |                                                            | spid           | int          |          |          |            | N        |               |          |              |
| 3              | 广告标题                                                   | advName        | varchar      | 20       |          |            | N        |               |          |              |
| 4              | 位置编号（如：移动端mobile_index_位置，pc端PC_index_位置） | positionNo     | varchar      | 50       |          |            | N        |               |          |              |
| 5              | 到期时间                                                   | expirationDate | datetime     |          |          |            | N        |               |          |              |
| 6              | 注册时间                                                   | creatTime      | datetime     |          |          |            | N        |               |          |              |
| 7              | 排序                                                       | sort           | int          |          |          |            | N        |               |          |              |
| 8              | 价格                                                       | price          | decimal      | 18,2     |          |            | N        |               |          |              |

#### **广告图片表**



| 数据表中文名称 |                        | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ---------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_advertisement_img |                |              |          |          |            |          |               |          |              |
| 功能简述       |                        |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**         | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              |                        | id             | int          |          | PK       |            | N        |               |          |              |
| 2              | 广告ID                 | advID          | int          |          |          |            | N        |               |          |              |
| 3              | 图片路径               | imgUrl         | varchar      | 100      |          |            | N        |               |          |              |
| 4              | 排序                   | sort           | int          |          |          |            | N        |               |          |              |

 #### **品牌表**



| 数据表中文名称 |                | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | -------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_brand     |                |              |          |          |            |          |               |          |              |
| 功能简述       |                |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名** | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表id           | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 品牌名称       | bpName         | varchar      | 20       |          |            | N        |               |          |              |
| 3              | 排序           | sort           | int          |          |          |            | N        |               |          |              |
| 4              | 只存一级分类   | classID        | int          |          |          |            | N        |               |          |              |
| 5              | 注册时间       | creatTime      | datetime     |          |          |            | N        |               |          |              |
| 6              |                | isDel          | bit          |          |          |            | N        |               |          |              |

 #### **收藏表**



| 数据表中文名称 |                 | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | --------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_collection |                |              |          |          |            |          |               |          |              |
| 功能简述       |                 |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**  | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              |                 | id             | int          |          |          |            | N        |               |          |              |
| 2              | 商品id          | spid           | int          |          |          |            | N        |               |          |              |
| 3              |                 | uid            | int          |          |          |            | N        |               |          |              |
| 4              | 注册时间        | creatTime      | datetime     |          |          |            | N        |               |          |              |

 #### **订单表**



| 数据表中文名称 |                                  | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | -------------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_order                       |                |              |          |          |            |          |               |          |              |
| 功能简述       |                                  |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                   | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 订单ID                           | orderID        | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 订单号                           | orderNo        | varchar      | 100      |          |            | N        |               |          |              |
| 3              | 第三方订单号                     | thirdOrderNo   | varchar      | 100      |          |            | N        |               |          |              |
| 4              | 手机                             | mobilePhone    | varchar      | 12       |          |            | N        |               |          |              |
| 5              | 地址ID                           | addressID      | int          |          |          |            | N        |               |          |              |
| 6              | 用户ID                           | uid            | int          |          |          |            | N        |               |          |              |
| 7              | 订单总金额                       | totalPrice     | decimal      | 18,2     |          |            | N        |               |          |              |
| 8              |                                  | remarks        | varchar      | 200      |          |            | N        |               |          |              |
| 9              | 过期时间                         | expirationDate | datetime     |          |          |            | N        |               |          |              |
| 10             | 注册时间                         | creatTime      | datetime     |          |          |            | N        |               |          |              |
| 11             | 订单状态（0-订单已关闭，1-可用） | OrderStatus    | int          |          |          |            | N        |               |          |              |
| 12             | 是否支付                         | PayStatus      | bit          |          |          |            | N        |               |          |              |
| 13             | 类型（1-支付宝，2-微信，3-银行） | payType        | int          |          |          |            | N        |               |          |              |

 #### **子订单表**



| 数据表中文名称 |                                          | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ---------------------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_orderItem                           |                |              |          |          |            |          |               |          |              |
| 功能简述       |                                          |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                           | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 子订单表                                 | orderItemID    | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 商品ID                                   | spid           | int          |          |          |            | N        |               |          |              |
| 3              | skuID对应sku表                           | skuid          | int          |          |          |            | N        |               |          |              |
| 4              | 订单ID                                   | orderID        | int          |          |          |            | N        |               |          |              |
| 5              | 购买数量                                 | number         | int          |          |          |            | N        |               |          |              |
| 6              | 价格                                     | price          | decimal      | 18,2     |          |            | N        |               |          |              |
| 7              | 发货时间                                 | fhDate         | datetime     |          |          |            | N        |               |          |              |
| 8              | 备注                                     | remake         | varchar      | 200      |          |            | N        |               |          |              |
| 9              | 0-待发货，1-待收货，2-待评价，3-交易成功 | state          | int          |          |          |            | N        |               |          |              |

 #### **退款表**



| 数据表中文名称 |                                            | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ------------------------------------------ | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_refund                                |                |              |          |          |            |          |               |          |              |
| 功能简述       |                                            |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                             | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              |                                            | id             | int          |          | PK       |            | N        |               |          |              |
| 2              |                                            | uid            | varchar      | 100      |          |            |          |               |          |              |
| 3              | 退款编号                                   | refundNo       | varchar      | 100      |          |            | N        |               |          |              |
| 4              | 订单号                                     | orderNo        | varchar      | 100      |          |            | N        |               |          |              |
| 5              | 状态（0-正在申请，1申请通过，2申请不通过） | state          | int          |          |          |            | N        |               |          |              |
| 6              | 退款理由                                   | refundMsg      | varchar      | 100      |          |            | N        |               |          |              |
| 7              | 注册时间                                   | creatTime      | datetime     |          |          |            | N        |               |          |              |

#### **购物车表**



| 数据表中文名称 |                | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | -------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_shopCar   |                |              |          |          |            |          |               |          |              |
| 功能简述       |                |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名** | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 购物车表id     | id             | int          |          |          |            | N        |               |          |              |
| 2              | 用户id         | uid            | int          |          |          |            | N        |               |          |              |
| 3              | 对应表skuid    | skuid          | int          |          |          |            | N        |               |          |              |
| 4              | 数量           | Number         | int          |          |          |            | N        |               |          |              |
| 5              | 价格           | Price          | decimal      | 18,2     |          |            | N        |               |          |              |
| 6              | 注册时间       | creatTime      | datetime     |          |          |            | N        |               |          |              |

 #### **商品sku表**



| 数据表中文名称 |                           | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_sku                  |                |              |          |          |            |          |               |          |              |
| 功能简述       |                           |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**            | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表id                      | skuID          | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 商品ID                    | spid           | int          |          |          |            | N        |               |          |              |
| 3              | 规格值，ids               | spfvIDs        | varchar      | 200      |          |            | N        |               |          |              |
| 4              | 对应属性值字符串          | spfvStr        | varchar      | 200      |          |            |          |               |          |              |
| 5              |                           | skuImg         | varchar      | 200      |          |            | N        |               |          |              |
| 6              | 价格                      | price          | decimal      | 18,2     |          |            | N        |               |          |              |
| 7              | 库存                      | stock          | int          |          |          |            | N        |               |          |              |
| 8              | sku状态，（1正常，0下架） | skuState       | int          |          |          |            | N        |               |          |              |
| 9              | 注册时间                  | creatTime      | datetime     |          |          |            | N        |               |          |              |

 #### **商品分类表**  



| 数据表中文名称 | 商品分类表       | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ---------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_sp_class    |                |              |          |          |            |          |               |          |              |
| 功能简述       |                  |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**   | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表ID             | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 分类名称         | className      | int          |          |          |            | N        |               |          |              |
| 3              | 轨迹，包括父级id | idList         | varchar      | 200      |          |            | N        |               |          |              |
| 4              | 父级分类         | fid            | int          |          |          |            | N        |               |          |              |
| 5              | 排序             | sort           | int          |          |          | 0          | N        |               |          |              |
| 6              | 是否删除         | IsDelete       | bit          |          |          |            | N        |               |          |              |
| 7              | 注册时间         | creatTime      | datetime     |          |          |            | N        |               |          |              |

#### **规格表**



| 数据表中文名称 |                | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | -------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_spf       |                |              |          |          |            |          |               |          |              |
| 功能简述       |                |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名** | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表id           | spfID          | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 分类ID         | classID        | int          |          |          |            | N        |               |          |              |
| 3              | 规格名称       | spfName        | varchar      | 10       |          |            | N        |               |          |              |
| 4              | 排序           | sort           | int          |          |          |            | N        |               |          |              |
| 5              | 注册时间       | creatTime      | datetime     |          |          |            | N        |               |          |              |

 #### **规格值表**



| 数据表中文名称 |                | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | -------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_spfv      |                |              |          |          |            |          |               |          |              |
| 功能简述       |                |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名** | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表id           | spfvID         | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 规格值         | spfValue       | varchar      | 20       |          |            | N        |               |          |              |
| 3              | 对应规格表ID   | spfID          | int          |          |          |            | N        |               |          |              |
| 4              | 排序           | sort           | int          |          |          |            | N        |               |          |              |
| 5              | 注册时间       | creatTime      | datetime     |          |          |            | N        |               |          |              |

#### **商品表**



| 数据表中文名称 |                          | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ------------------------ | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_spu                 |                |              |          |          |            |          |               |          |              |
| 功能简述       |                          |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**           | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 商品ID                   | spid           | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 商品名称                 | spName         | varchar      | 50       |          |            | N        |               |          |              |
| 3              | 轨迹，对应所在分类的轨迹 | classIDs       | varchar      | 20       |          |            | N        |               |          |              |
| 4              | 商品分类id，             | ClassID        | int          |          |          |            | N        |               |          |              |
| 5              | 品牌ID                   | bpid           | int          |          |          |            | N        |               |          |              |
| 6              | 平均价格                 | vagPrice       | decimal      | 18,2     |          |            | N        |               |          |              |
| 7              | 店铺ID                   | shopid         | int          |          |          |            | N        |               |          |              |
| 8              | 封面                     | cover          | varchar      | 200      |          |            | N        |               |          |              |
| 9              | 排序                     | sort           | int          |          |          |            | N        |               |          |              |
| 10             | 注册时间                 | creatTime      | datetime     |          |          |            | N        |               |          |              |
| 11             | 状态（1正常，0下架）     | saleState      | int          |          |          |            | N        |               |          |              |
| 12             | 销量                     | salesNumber    | int          |          |          |            | N        |               |          |              |
| 13             | 浏览量                   | views          | int          |          |          |            | N        |               |          |              |

 #### **商品评价表**



| 数据表中文名称 |                   | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ----------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_spu_evaluate |                |              |          |          |            |          |               |          |              |
| 功能简述       |                   |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**    | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表id              | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              |                   | spid           | int          |          |          |            | N        |               |          |              |
| 3              |                   | skuid          | int          |          |          |            | N        |               |          |              |
| 4              | 商品星级          | spStar         | int          |          |          |            | N        |               |          |              |
| 5              | 商品评价          | spevaluate     | varchar      | 100      |          |            | N        |               |          |              |
| 6              | 物流星级评价      | shopWl         | int          |          |          |            | N        |               |          |              |
| 7              | 是否匿名          | anonymous      | bit          |          |          |            | N        |               |          |              |
| 8              | 商品服务星级评价  | shopFw         | int          |          |          |            | N        |               |          |              |
| 9              | 注册时间          | creatTime      | datetime     |          |          |            | N        |               |          |              |

#### **商品评价图片**



| 数据表中文名称 |                       | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | --------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_spu_evaluate_img |                |              |          |          |            |          |               |          |              |
| 功能简述       |                       |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**        | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              |                       | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 评价ID                | evaluateID     | int          |          |          |            | N        |               |          |              |
| 3              | 图片路径              | img            | varchar      | 100      |          |            | N        |               |          |              |

 #### **评价回复表**



| 数据表中文名称 |                         | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ----------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_spu_evaluate_reply |                |              |          |          |            |          |               |          |              |
| 功能简述       |                         |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**          | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              |                         | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 评价ID                  | evaluateID     | int          |          |          |            | N        |               |          |              |
| 3              | 回复img                 | econtent       | varchar      | 200      |          |            | N        |               |          |              |
| 4              | 回复人uid               | replyuid       | int          |          |          |            | N        |               |          |              |
| 5              | 被回复人                | coveruid       | int          |          |          |            | N        |               |          |              |
| 6              | 注册时间                | creatTime      | datetime     |          |          |            | N        |               |          |              |

 #### **用户表**  



| 数据表中文名称 | 用户表                                   | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ---------------------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_sys_user                            |                |              |          |          |            |          |               |          |              |
| 功能简述       |                                          |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                           | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 用户ID，即表ID                           | uid            | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 头像                                     | headPortrait   | varchar      | 100      |          |            | N        |               |          |              |
| 3              | 登录账号（一般为手机号码，或者邮箱账号） | loginName      | varchar      | 20       |          |            | N        |               |          |              |
| 4              | 密码随机生成的key                        | passkey        | varchar      | 20       |          |            | N        |               |          |              |
| 5              | 随机生成的key+密码=passVuale             | passValue      | varchar      | 100      |          |            | N        |               |          |              |
| 6              | 昵称                                     | nickName       | varchar      | 20       |          |            | N        |               |          |              |
| 7              | 真实姓名                                 | realName       | varchar      | 10       |          |            | N        |               |          |              |
| 8              | 1-男，2-女                               | sex            | int          |          |          |            | N        |               |          |              |
| 9              | 用户状态（默认为1，激活，0-禁用）        | uStatus        | int          |          |          | 1          | N        |               |          |              |
| 10             | 手机号                                   | Mobile         | varchar      | 11       |          |            | N        |               |          |              |
| 11             | 邮箱                                     | Email          | varchar      | 20       |          |            | N        |               |          |              |
| 12             | 登录次数                                 | LoginNum       | int          |          |          |            | N        |               |          |              |
| 13             | 最近登录时间                             | LastLogin      | datetime     |          |          |            | N        |               |          |              |
| 14             | 注册时间                                 | creatTime      | datetime     |          |          |            | N        |               |          |              |
| 15             | 微信openid                               | wx_openid      | varchar      | 50       |          |            | N        |               |          |              |
| 16             | qq快捷登录                               | qq_code        | varchar      | 50       |          |            | N        |               |          |              |
| 17             | 生日                                     | birthday       | datetime     |          |          |            | N        |               |          |              |
| 18             | 注册备注                                 | regRemarks     | varchar      | 50       |          |            | N        |               |          |              |

 #### **交易表**



| 数据表中文名称 |                                  | 修改说明        | 调整         |          |          |            |          |               |          |              |
| -------------- | -------------------------------- | --------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_transaction                 |                 |              |          |          |            |          |               |          |              |
| 功能简述       |                                  |                 |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                   | **字段英文名**  | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表ID                             | id              | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 流水号                           | transactionNo   | varchar      | 100      |          |            | N        |               |          |              |
| 3              | 订单号对应交易号                 | orderNo         | varchar      | 100      |          |            | N        |               |          |              |
| 4              | 第三方订单号                     | thirdOrderNo    | varchar      | 100      |          |            | N        |               |          |              |
| 5              | 付款方账号                       | payAccount      | varchar      | 100      |          |            | N        |               |          |              |
| 6              | 收入方账号                       | incomeAccount   | varchar      | 100      |          |            | N        |               |          |              |
| 7              | 类型（1-支付宝，2-微信，3-银行） | payType         | int          |          |          |            | N        |               |          |              |
| 8              | 流水信息                         | transactionMsg  | varchar      | 200      |          |            | N        |               |          |              |
| 9              | 流水类型（1-支出，2-收入）       | transactionType | int          |          |          |            | N        |               |          |              |
| 10             | 用户ID                           | uid             | int          |          |          |            | N        |               |          |              |
| 11             | 注册时间                         | creatTime       | datetime     |          |          |            | N        |               |          |              |

 #### **店铺表**



| 数据表中文名称 |                           | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Shop_user_shop            |                |              |          |          |            |          |               |          |              |
| 功能简述       |                           |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**            | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 店铺ID                    | shopid         | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 店铺名称                  | shopName       | varchar      | 100      |          |            | N        |               |          |              |
| 3              | 用户表id                  | uid            | int          |          |          |            | N        |               |          |              |
| 4              |                           | shopTelephone  | varchar      | 20       |          |            | N        |               |          |              |
| 5              | 店铺状态（1正常，0-下架） | shopState      | int          |          |          |            | N        |               |          |              |
| 6              | 排序                      | sort           | int          |          |          |            | N        |               |          |              |
| 7              | 注册时间                  | creatTime      | datetime     |          |          |            | N        |               |          |              |
| 8              | 店铺logo                  | shopLogo       | varchar      | 100      |          |            | N        |               |          |              |
| 9              | 备注                      | remarks        | varchar      | 200      |          |            | N        |               |          |              |

 

# 第二章、 lzx-Blog 技术方案

## 2.1 lzx-Blog所需项目

### 2.1.1 web端（只做pc端操作，蕴含Signalr技术做一个简单群聊）

### 2.1.2 web端接口

## 2.2 lzx-Blog数据库字段设计



 #### **广告表**  



| 数据表中文名称 | 广告表                  | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ----------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Advertisement           |                |              |          |          |            |          |               |          |              |
| 功能简述       |                         |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**          | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表id                    | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 标题                    | Title          | varchar      | 64       |          |            | N        |               |          |              |
| 3              | url广告链接             | Url            | varchar      | 256      |          |            | N        |               |          |              |
| 4              | 图片路径                | ImgUrl         | varchar      | 200      |          |            | N        |               |          |              |
| 5              | 备注                    | Remark         | varchar      | 200      |          |            | N        |               |          |              |
| 6              | 创建时间                | Createdate     | datetime     |          |          |            | N        |               |          |              |
| 7              | 到期时间                | expirationDate | datetime     |          |          |            | N        |               |          |              |
| 8              | 状态（默认为1，0-禁止） | state          | int          |          |          |            | N        |               |          |              |

 #### **博文评论表**  



| 数据表中文名称 | 博文评论表                          | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ----------------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | ArticleComment                      |                |              |          |          |            |          |               |          |              |
| 功能简述       |                                     |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                      | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              |                                     | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 评论人                              | uid            | int          |          |          |            | N        |               |          |              |
| 3              | 当为第一当前留言为0，否则存储@人uid | reply          | int          |          |          | 0          | N        |               |          |              |
| 4              | 父级ID，如为0则为一级评论           | fid            | int          |          |          | 0          | N        |               |          |              |
| 5              | 文章ID                              | articleID      | int          |          |          |            | N        |               |          |              |
| 6              | uid的头像                           | headPortrait   | varchar      | 100      |          |            | N        |               |          |              |
| 7              | 内容                                | bcontent       | text         |          |          |            | N        |               |          |              |
| 8              | 创建时间                            | CreateTime     | datetime     |          |          |            | N        |               |          |              |
| 9              | 是否删除                            | IsDeleted      | bit          |          |          |            | N        |               |          |              |

 #### **博客表**  



| 数据表中文名称 | 博客表                                   | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ---------------------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | BlogArticle                              |                |              |          |          |            |          |               |          |              |
| 功能简述       |                                          |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                           | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表id                                     | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 创建者昵称                               | nickName       | varchar      | 20       |          |            | N        |               |          |              |
| 3              | 创建者、对应用户表uid                    | uid            | int          |          |          |            | N        |               |          |              |
| 4              |                                          | title          | varchar      | 50       |          |            | N        |               |          |              |
| 5              | 分类id                                   | categoryId     | int          |          |          |            | N        |               |          |              |
| 6              | 内容                                     | bcontent       | text         |          |          |            | N        |               |          |              |
| 7              | 阅读量                                   | readSum        | int          |          |          |            | N        |               |          |              |
| 8              | 点赞量                                   | likeSum        | int          |          |          |            | N        |               |          |              |
| 9              | 是否删除                                 | IsDeleted      | bit          |          |          |            | N        |               |          |              |
| 10             | 状态（1-通过，0-正在申请通过，2-未通过） | bstate         | int          |          |          |            | N        |               |          |              |
| 11             | 创建时间                                 | CreateTime     | datetime     |          |          |            | N        |               |          |              |
| 12             | 备注                                     | bRemark        | varchar      | 100      |          |            | N        |               |          |              |
| 13             | 标签，以逗号隔开                         | tabs           | varchar      | 200      |          |            | N        |               |          |              |
| 14             | 值越大越靠前                             | sort           | int          |          |          |            | N        |               |          |              |
| 15             | 是否置顶                                 | isTop          | bit          |          |          |            | N        |               |          |              |

#### **留言表** 

 

| 数据表中文名称 | 留言表                                 | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | -------------------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | LeaveMsg                               |                |              |          |          |            |          |               |          |              |
| 功能简述       |                                        |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                         | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表ID                                   | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 留言人                                 | uid            | int          |          |          |            | N        |               |          |              |
| 3              | 当为第一当前留言为0，否则存储回复人uid | reply          | int          |          |          | 0          | N        |               |          |              |
| 4              | 父级ID，如为0则为一级留言              | fid            | int          |          |          | 0          | N        |               |          |              |
| 5              | uid的头像                              | headPortrait   | varchar      | 100      |          |            | N        |               |          |              |
| 6              | 内容                                   | bcontent       | text         |          |          |            | N        |               |          |              |
| 7              | 创建时间                               | CreateTime     | datetime     |          |          |            | N        |               |          |              |
| 8              | 是否删除                               | IsDeleted      | bit          |          |          |            | N        |               |          |              |

 #### **系统日志表**  



| 数据表中文名称 | 系统日志表               | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ------------------------ | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Sys_Log                  |                |              |          |          |            |          |               |          |              |
| 功能简述       |                          |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**           | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表ID                     | id             | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 记录类型(1-登录，2-注册) | logType        | int          |          |          |            | N        |               |          |              |
| 3              | 创建时间                 | CreateTime     | datetime     |          |          |            | N        |               |          |              |
| 4              | 描述                     | bcontent       | varchar      | 50       |          |            | N        |               |          |              |

 #### **用户表**  



| 数据表中文名称 | 用户表                                   | 修改说明       | 调整         |          |          |            |          |               |          |              |
| -------------- | ---------------------------------------- | -------------- | ------------ | -------- | -------- | ---------- | -------- | ------------- | -------- | ------------ |
| 数据表英文名称 | Sys_User                                 |                |              |          |          |            |          |               |          |              |
| 功能简述       |                                          |                |              |          |          |            |          |               |          |              |
| **序号**       | **字段中文名**                           | **字段英文名** | **数据类型** | **宽度** | **约束** | **默认值** | **空值** | **枚举&说明** | **自增** | **修改说明** |
| 1              | 表id                                     | uid            | int          |          | PK       |            | N        |               | Y        |              |
| 2              | 头像                                     | headPortrait   | varchar      | 100      |          |            | N        |               |          |              |
| 3              | 登录账号（一般为手机号码，或者邮箱账号） | loginName      | varchar      | 20       |          |            | N        |               |          |              |
| 4              | 密码随机生成的key                        | passkey        | varchar      | 20       |          |            | N        |               |          |              |
| 5              | 1-男，2-女                               | sex            | int          |          |          |            | N        |               |          |              |
| 6              | 随机生成的key+密码=passVuale             | passValue      | varchar      | 100      |          |            | N        |               |          |              |
| 7              | 昵称                                     | nickName       | varchar      | 20       |          |            | N        |               |          |              |
| 8              | 真实姓名                                 | realName       | varchar      | 10       |          |            | N        |               |          |              |
| 9              | 用户状态（默认为1，激活，0-禁用）        | uStatus        | int          |          |          | 1          | N        |               |          |              |
| 10             | 手机号                                   | Mobile         | varchar      | 11       |          |            | N        |               |          |              |
| 11             | 邮箱                                     | Email          | varchar      | 20       |          |            | N        |               |          |              |
| 12             | 登录次数                                 | LoginNum       | int          |          |          |            | N        |               |          |              |
| 13             | 最近登录时间                             | LastLogin      | datetime     |          |          |            | N        |               |          |              |
| 14             | 注册时间                                 | creatTime      | datetime     |          |          |            | N        |               |          |              |
| 15             | 微信openid                               | wx_openid      | varchar      | 50       |          |            | N        |               |          |              |
| 16             | qq快捷登录code                           | qq_code        | varchar      | 50       |          |            | N        |               |          |              |
| 17             | 生日                                     | birthday       | datetime     |          |          |            | N        |               |          |              |
| 18             | 注册备注                                 | regRemarks     | varchar      | 50       |          |            | N        |               |          |              |

 

